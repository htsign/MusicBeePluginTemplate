# SortOrderTagCreationPlugin
Windows用ソフトウェア、MusicBee用のプラグインです。メインパネルに表示中の曲に対してソートタグを書き込む機能を提供します。<br/>
問題があればIssuesへの投稿をお願いします。スレに書いてくれても構いません。

This is a plug-in for MusicBee that works on Windows. It provides a feature to write sort order (by hiragana) tags for Japanese musics displayed main panel on the MusicBee.

## 使い方
4 以降はお好みでどうぞ。

1. zipファイルを解凍して、MusicBeeのPluginsフォルダに丸ごと置きます。
1. MusicBeeを起動して、`メニュー`→`編集`→`設定`と辿り、`プラグイン`タブをクリックします。
1. `SortOrderTagCreationPlugin`という項目が出ていると思うので、自由に設定してください。
1. メインパネルの上部、「再生中」などと表示されている辺りをクリックし、出てくるコンテキストメニューの`ツールバーの構成`をクリックします。
1. `ボタンの文字列またはアイコン`に「ソートタグ設定」と入力、`コマンド`に`ソートタグを各曲に設定する`を選択します。

あとは目的の曲一覧をメインパネルに表示した状態で機能を呼び出すだけです。<br/>
4 以降を実施し、タブバーに機能ボタンを置いておくと捗ります。

## 設定項目
- ソートに使われるカスタムタグ
  - 読みを取得して書き込むタグを選択します。<br/>
  チェックボックスにチェックを入れると、そのタグの読みが選択されたカスタムタグに書き込まれるようになります。
- ファイルの追加時や編集時に自動で付与する
  - まだ機能しません。<br/>
  ライブラリに追加ファイルがあった場合に自動でソートタグを設定する機能を付けようかと妄想しています。
- 既にタグが書き込まれている場合は上書きしない
  - 既に目的のカスタムタグに値が入っている場合は書き込みをスキップします。
- APIの提供元
  - 読みを取得する際にどこのWebAPIを利用するかを選択できます。<br/>
  基本的にどこを使っても同じ結果が返るようになっていますが、例えば「風」を「かぜ」と読んだり「ふう」と読んだりなど、微妙な違いがあったりします。<br/>
  また、混み具合によりレスポンスの早い遅いにも差が出ることもあります。
- 一致判定
  - この正規表現文にマッチすると、その文字列は漢字を含んでいると見做してWebAPIへ投げられます。<br/>
  これによって予期せぬ変換が行われることがあります。<br/>
  よく分からなくなったら全削除して空っぽにしてください。デフォルト値に戻ります。
- 置換判定
  - 変換対象外の文字列を指定する為の正規表現文です。<br/>
  これにマッチした部位はWebAPIのリクエスト前に内部で一時変数に退避させられます。<br/>
  主にWebAPIがエラーを起こさないよう、予期しない特殊文字を含めない為の処理に使われます。
- ユーザー辞書
  - 指定したい読みがある場合はここに追加します。追加することで、優先的に任意の読みを強制させることができます。<br/>
  メニューバーの`ファイル(F)`から辞書のインポート＆エクスポートもできます。

## 謝辞
- 2ch のスレ住人の皆さま
  - 様々な意見の提示やテスト協力をしていただきました。ありがとうございます。
